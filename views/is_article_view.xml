<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <data>
        <!-- Wizard pour actualiser la liste des articles -->
        <record id="is_article_actualiser_view" model="ir.ui.view">
            <field name="name">is_article_actualiser_view</field>
            <field name="model">is.article.actualiser</field>
            <field name="arch" type="xml">
                <form string="Actualiser la liste des articles">
                    <footer>
                        <button string='Actualiser la liste des articles' name="actualiser_liste_articles" type="object" default_focus="1" class="btn-primary" data-hotkey="q"/>
                        ou
                        <button string="Annuler" class="btn-secondary" special="cancel" data-hotkey="z"/>
                    </footer>
               </form>
            </field>
        </record>
        <record id="is_article_actualiser_action" model="ir.actions.act_window">
            <field name="name">Actualiser la liste des articles</field>
            <field name="res_model">is.article.actualiser</field>
            <field name="view_mode">form</field>
           <field name="view_id" ref="is_article_actualiser_view"/>
           <field name="target">new</field>
        </record>
        
        <!-- is.article -->
        <record model="ir.ui.view" id="is_article_form_view">
            <field name="name">is_article_form_view</field>
            <field name="model">is.article</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Form" create="false">  
                    <sheet>
                        <group>
                            <field name="name" readonly="1"/>
                            <field name="designation" readonly="1"/>
                            <field name="moule" readonly="1"/>
                            <field name="famille" readonly="1"/>
                            <field name="sous_famille" readonly="1"/>
                            <field name="categorie" readonly="1"/>
                            <field name="gestionnaire" readonly="1"/>
                            <field name="ref_fournisseur" readonly="1"/>
                            <field name="ref_client" readonly="1"/>
                            <field name="ref_plan" readonly="1"/>
                            <field name="couleur" readonly="1"/>
                            <field name="client_id" readonly="1"/>
                            <field name="fournisseur_id" readonly="1"/>
                            <field name="unite" readonly="1"/>
                            <field name="database_id" readonly="1"/>
                            <field name="societe" readonly="1"/>
                            <field name="cout_standard" readonly="1"/>
                            <field name="cout_actualise" readonly="1"/>
                            <field name="prix_vente" readonly="1"/>
                            <field name="prevision_annee_n" readonly="1"/>
                            <field name="id_origine" readonly="1"/>
                            <field name="url_origine" widget="url"/> 
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record model="ir.ui.view" id="is_article_tree_view">
            <field name="name">is_article_tree_view</field>
            <field name="model">is.article</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree create="false">
                    <field name="name"/>
                    <field name="designation"       optional="show"/>
                    <field name="moule"             optional="show"/>
                    <field name="famille"           optional="show"/>
                    <field name="sous_famille"      optional="show"/>
                    <field name="categorie"         optional="show"/>
                    <field name="gestionnaire"      optional="show"/>
                    <field name="ref_fournisseur"   optional="show"/>
                    <field name="ref_client"        optional="show"/>
                    <field name="ref_plan"          optional="show"/>
                    <field name="couleur"           optional="show"/>
                    <field name="client_id"         optional="show"  widget="many2one_clickable"/>
                    <field name="fournisseur_id"    optional="show"  widget="many2one_clickable"/>
                    <field name="unite"             optional="show"/>
                    <field name="database_id"       optional="show"/>
                    <field name="societe"           optional="hide"/>
                    <field name="cout_standard"     optional="show"/>
                    <field name="cout_actualise"    optional="show"/>
                    <field name="prix_vente"        optional="show"/>
                    <field name="prevision_annee_n" optional="show"/>
                    <field name="id_origine"        optional="hide"/>
                    <field name="url_origine"       optional="hide" widget="url"/> 
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="is_article_search_view" >
            <field name="name">is_article_search_view</field>
            <field name="model">is.article</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
                    <field name="designation"/>
                    <field name="moule"/>
                    <field name="famille"/>
                    <field name="sous_famille"/>
                    <field name="categorie"/>
                    <field name="gestionnaire"/>
                    <field name="ref_fournisseur"/>
                    <field name="ref_client"/>
                    <field name="ref_plan"/>
                    <field name="couleur"/>
                    <field name="client_id"/>
                    <field name="fournisseur_id"/>
                    <field name="database_id"/>
                    <field name="societe"/>
                </search>
            </field>
        </record>
        <record model="ir.ui.view" id="is_article_pivot_view">
            <field name="name">is_article_pivot_view</field>
            <field name="model">is.article</field>
            <field name="arch" type="xml">
                <pivot string="Articles">
                    <field name="categorie" type="row"/>
                </pivot>
            </field>
        </record>
        <record model="ir.ui.view" id="is_article_graph_view">
            <field name="name">is_article_graph_view</field>
            <field name="model">is.article</field>
            <field name="arch" type="xml">
                <graph string="Articles" type="bar">
                    <field name="categorie" type="row"/>
                </graph>
            </field>
        </record>
        <record model="ir.actions.act_window" id="is_article_action">
            <field name="name">Articles de tous les sites</field>
            <field name="res_model">is.article</field>
            <field name="view_mode">tree,form,pivot,graph</field>
        </record>


        <!-- Lancement automatisÃ© du calcul -->
        <record id="is_article_scheduler_action" model="ir.cron">
            <field name="name">Actualiser la liste des articles de tous les sites</field>
            <field name="model_id" ref="is_plastigray16.model_is_article_actualiser"/>
            <field name="state">code</field>
            <field name="code">model.run_actualiser_liste_articles()</field>
            <field name="interval_type">days</field>
            <field name="numbercall">-1</field>
        </record>

    </data>
</odoo>
