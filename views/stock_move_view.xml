<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- stock.move.line -->
        <record id="is_view_stock_move_line_operation_tree" model="ir.ui.view">
            <field name="name">is_view_stock_move_line_operation_tree</field>
            <field name="model">stock.move.line</field>
            <field name="inherit_id" ref="stock.view_stock_move_line_operation_tree"/>
            <field name="arch" type="xml">
                <field name="lot_id" position="replace">
                    <field name="lot_id"/>
                </field>
                <field name="lot_name"          position="replace"/>
                <field name="result_package_id" position="replace"/>
                <xpath expr="//field[@name='package_id'][2]" position="attributes">
                    <attribute name="invisible">1</attribute> 
                </xpath>
            </field>
        </record>
        <record id="is_view_stock_move_line_detailed_operation_tree" model="ir.ui.view">
            <field name="name">is_view_stock_move_line_detailed_operation_tree</field>
            <field name="model">stock.move.line</field>
            <field name="inherit_id" ref="stock.view_stock_move_line_detailed_operation_tree"/>
            <field name="arch" type="xml">
                <field name="lot_id" position="replace">
                    <field name="lot_id"/>
                </field>
                <field name="lot_name" position="replace"/>
                <xpath expr="//field[@name='package_id'][2]" position="attributes">
                    <attribute name="invisible">1</attribute> 
                </xpath>
                <xpath expr="//field[@name='result_package_id'][2]" position="attributes">
                    <attribute name="invisible">1</attribute> 
                </xpath>
                <xpath expr="//field[@name='reserved_uom_qty']" position="attributes">
                    <attribute name="optional">hide</attribute> 
                </xpath>
            </field>
        </record> 

        <record id="is_view_move_form" model="ir.ui.view">
            <field name="name">is_view_move_form</field>
            <field name="model">stock.move</field>
            <field name="inherit_id" ref="stock.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//header/field[@name='state']" position="before">
                    <button string="Raz"          name="is_raz_action"          type="object" groups="base.group_no_one" states="futur"/>
                    <button string="Confirm"      name="is_confirm_action"      type="object" groups="base.group_no_one"/>
                    <button string="Asign"        name="is_assign_action"       type="object" groups="base.group_no_one"/>
                    <!-- <button string="Fait=Réservé" name="is_fait_reserve_action" type="object" groups="base.group_no_one"/> -->
                    <!-- <button string="Créer Lot"    name="is_creer_lot_action"    type="object" groups="base.group_no_one"/> -->
                    <button string="Done"         name="is_done_action"         type="object" groups="base.group_no_one"/>
                </xpath>
                <xpath expr="//group[@name='main_grp_col2']/field[@name='name']" position="before">
                    <field name="quantity_done"/>
                </xpath>
                <field name="group_id" position="after">
                    <field name="picking_id"                 attrs="{'invisible':[('picking_id','=',False)]}"/>
                    <field name="picking_type_id"/>
                    <field name="production_id"              attrs="{'invisible':[('production_id','=',False)]}"/>
                    <field name="raw_material_production_id" attrs="{'invisible':[('raw_material_production_id','=',False)]}"/>
                    <field name="is_employee_theia_id"       attrs="{'invisible':[('is_employee_theia_id','=',False)]}"/>
                    <field name="create_uid"/>
                    <field name="write_uid"/>
                </field>
                <group name="origin_grp" position="after">
                    <group string="Amortissement Moule">
                        <field name="is_amortissement_moule"/>
                        <field name="is_amt_interne"/>
                        <field name="is_cagnotage"/>
                        <field name="is_montant_amt_moule"/>
                        <field name="is_montant_amt_interne"/>
                        <field name="is_montant_cagnotage"/>
                        <field name="is_montant_matiere"/>
                    </group>
                </group>
                <group name="linked_group" position="before">
                    <field name="move_line_ids">
                        <tree>
                            <field name="product_id"/>
                            <field name="location_id"      optional="show"/>
                            <field name="location_dest_id" optional="show"/>
                            <field name="lot_id"           optional="show"/>
                            <field name="lot_name"         optional="hide"/>
                            <field name="reserved_uom_qty" optional="show"/>
                            <field name="qty_done"         optional="show"/>
                            <field name="product_uom_id"   optional="show"/>
                            <field name="is_locked"        optional="hide"/>
                            <field name="lots_visible"     optional="hide"/>
                            <field name="state" widget="badge" optional="show" decoration-danger="state=='cancel'" decoration-info="state== 'assigned'" decoration-muted="state == 'draft'" decoration-success="state == 'done'" decoration-warning="state not in ('draft','cancel','done','assigned')"/>
                            <field name="company_id"                 invisible="1"/>
                            <field name="move_id"                    invisible="1"/>
                            <field name="picking_id"                 invisible="1"/>
                            <field name="product_uom_category_id"    invisible="1"/>
                            <field name="package_id"                 invisible="1"/>
                            <field name="result_package_id"          invisible="1"/>
                            <field name="owner_id"                   invisible="1"/>
                            <field name="is_initial_demand_editable" invisible="1"/>
                        </tree>
                    </field>

                </group>
            </field>
        </record>



        <!-- <record id="is_view_move_form" model="ir.ui.view">
            <field name="name">stock.move.form</field>
            <field name="model">stock.move</field>
            <field name="inherit_id" ref="stock.view_move_form"/>
            <field name="arch" type="xml">
                <field name="group_id" position="after">
                    <field name="restrict_lot_id" />
                    <field name="create_uid"/>
                    <field name="write_uid"/>
                    <field name="is_employee_theia_id"/>
                </field>
                <group name="destination_grp" position="after">
                    <group string="Amortissement Moule">
                        <field name="is_amortissement_moule"/>
                        <field name="is_amt_interne"/>
                        <field name="is_cagnotage"/>
                        <field name="is_montant_amt_moule"/>
                        <field name="is_montant_amt_interne"/>
                        <field name="is_montant_cagnotage"/>
                        <field name="is_montant_matiere"/>
                    </group>
                </group>
            </field>
        </record> -->

        <!-- <record id="is_view_move_tree" model="ir.ui.view">
            <field name="name">is_view_move_tree</field>
            <field name="model">stock.move</field>
            <field name="inherit_id" ref="stock.view_move_tree"/>
            <field name="arch" type="xml">
                <field name="name" position="attributes">
                    <attribute name="invisible">1</attribute>>
                </field>
                <field name="date_expected" position="after">
                    <field name="create_uid"/>
                    <field name="write_uid"/>
                    <field name="is_employee_theia_id"/>
                </field>
                <field name="date" position="replace">
                    <field name="date" />
                </field>
                <button string="Scrap Products" position="attributes">
                    <attribute name="invisible">1</attribute>>
                </button>
                <button name="action_done" position="attributes">
                    <attribute name="invisible">1</attribute>>
                </button>
            </field>
        </record> -->

        <!-- Liste des mouvements terminés --> 
        <record id="is_mouvements_termines_tree" model="ir.ui.view">
            <field name="name">is_mouvements_termines_tree</field>
            <field name="model">stock.move</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="date"/>
                    <field name="product_id" widget="many2one_clickable"/>
                    <field name="location_id" optional="show"/>
                    <field name="location_dest_id" optional="show"/>
                    <field name="product_uom_qty" optional="show" sum="Total"/>
                    <field name="product_uom" optional="show" string="Unité"/>
                    <field name="lot_ids"               optional="show" widget="many2many_tags"/>
                    <field name="write_uid" optional="show"/>
                    <field name="picking_type_id" optional="hide"/>
                    <field name="picking_id" optional="hide"/>
                    <field name="origin" optional="hide"/>
                    <button 
                        name="action_show_details" 
                        type="object" title="Show Details" icon="fa-list" 
                    />
                    <field 
                        name="state" 
                        decoration-success="state in ('done')" 
                        decoration-muted="state == 'cancel'" 
                        optional="show" 
                        widget="badge" 
                        class="text-dark"
                    />
                </tree>
            </field>
        </record>

        <record id="is_entrees_sorties_stock_action" model="ir.actions.act_window">
            <field name="name">Entrées-sorties de stocks</field>
            <field name="res_model">stock.move</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="is_mouvements_termines_tree"/>
        </record>
    



        <!-- Mouvements en cours -->
        <!-- <record id="is_mouvements_en_cours_action" model="ir.actions.act_window">
            <field name="name">Mouvements en cours</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.move</field>
            <field name="domain">[('state','in',['draft','waiting','confirmed','assigned'])]</field>
            <field name="limit">200</field>
            <field name="view_id" ref="is_view_move_tree"/>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record> -->
        <!-- Mouvements Terminés -->
        <!-- <record id="is_mouvements_termines_action" model="ir.actions.act_window">
            <field name="name">Mouvements terminés</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.move</field>
            <field name="domain">[('state','in',['done'])]</field>
            <field name="limit">200</field>
            <field name="view_id" ref="is_mouvements_termines_tree"/>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record> -->
        <!-- Tous les mouvements -->
        <!-- <record id="is_mouvements_tous_action" model="ir.actions.act_window">
            <field name="name">Tous les mouvements</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.move</field>
            <field name="domain">[]</field>
            <field name="limit">200</field>
            <field name="view_id" ref="is_view_move_tree"/>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
 -->

        <!-- <record id="is_view_move_picking_tree" model="ir.ui.view">
            <field name="name">is_view_move_picking_tree</field>
            <field name="model">stock.move</field>
            <field name="inherit_id" ref="stock.view_move_picking_tree"/>
            <field name="arch" type="xml">
                <button string="Scrap Products" position="attributes">
                    <attribute name="invisible">1</attribute>>
                </button>
                <field name="product_id" position="after">
                    <field name="name" />
                    <field name="is_lots"/>
                    <field name="is_point_dechargement"/>
                    <field name="is_dosmat_ctrl_qual"/>
                    <field name="is_dosmat_conditions_stockage"/>
                </field>
            </field>
        </record> -->



    </data>
</odoo>